# Чек-лист интеграционного тестирования Bazaar

## Критические функции (ОБЯЗАТЕЛЬНО)

### 1. Аутентификация ✓
- [ ] Открыть приложение через Telegram WebApp
- [ ] Проверить, что происходит автоматический вход
- [ ] Проверить, что имя пользователя отображается корректно
- [ ] Выйти и войти снова

### 2. Главная страница (Feed)
- [ ] Открыть главную страницу
- [ ] Проверить, что объявления загружаются
- [ ] Проверить, что отображаются изображения
- [ ] Проверить, что показывается цена и название
- [ ] Проверить скролл (должен быть плавным)

### 3. Поиск
- [ ] Ввести поисковый запрос (например, "самокат")
- [ ] Проверить, что результаты фильтруются
- [ ] Очистить поиск
- [ ] Проверить автодополнение (должны показываться популярные запросы)

### 4. Фильтры
- [ ] Открыть фильтры
- [ ] Выбрать категорию
- [ ] Установить диапазон цены
- [ ] Ввести локацию
- [ ] Применить фильтры
- [ ] Проверить, что результаты соответствуют фильтрам
- [ ] Сбросить фильтры

### 5. Создание объявления
- [ ] Нажать "Продам"
- [ ] Заполнить все поля (название, цена, описание)
- [ ] Загрузить 2-3 фотографии
- [ ] Выбрать категорию
- [ ] Указать локацию
- [ ] Опубликовать
- [ ] Проверить, что объявление появилось в "Мои объявления"

### 6. Просмотр объявления
- [ ] Открыть любое объявление
- [ ] Проверить, что показываются все фото (галерея)
- [ ] Проверить, что можно листать фото
- [ ] Проверить, что показывается цена, описание, локация
- [ ] Проверить, что показывается продавец
- [ ] Нажать на фото (должен открыться lightbox)
- [ ] Закрыть lightbox

### 7. Профиль продавца
- [ ] Открыть объявление
- [ ] Нажать на профиль продавца
- [ ] Проверить, что открывается страница профиля
- [ ] Проверить, что показываются объявления продавца
- [ ] Проверить, что показываются отзывы (если есть)

### 8. Сообщения (Чат)
- [ ] Открыть объявление (не свое)
- [ ] Нажать "Написать продавцу"
- [ ] Проверить, что открывается чат
- [ ] Отправить сообщение
- [ ] **КРИТИЧНО:** Проверить, что сообщение появилось МГНОВЕННО (optimistic UI)
- [ ] Обновить страницу
- [ ] Проверить, что сообщение сохранилось
- [ ] Написать другому продавцу
- [ ] Вернуться в "Сообщения"
- [ ] Проверить, что показываются ОБА чата

### 9. Избранное
- [ ] Открыть объявление
- [ ] Нажать на сердечко (добавить в избранное)
- [ ] Перейти в "Избранное"
- [ ] Проверить, что объявление там есть
- [ ] Убрать из избранного
- [ ] Проверить, что объявление исчезло

### 10. Мои объявления
- [ ] Перейти в "Мои объявления"
- [ ] Проверить, что показываются все ваши объявления
- [ ] Открыть свое объявление
- [ ] Нажать "Редактировать"
- [ ] Изменить название или цену
- [ ] Сохранить
- [ ] Проверить, что изменения применились

### 11. Удаление объявления
- [ ] Открыть свое объявление
- [ ] Нажать "Удалить"
- [ ] Подтвердить удаление
- [ ] Проверить, что объявление исчезло из "Мои объявления"

## Дополнительные функции

### 12. Карта
- [ ] Открыть главную страницу
- [ ] Переключиться на режим "Карта"
- [ ] Проверить, что показываются пины с объявлениями
- [ ] Нажать на пин
- [ ] Проверить, что показывается превью объявления

### 13. Похожие объявления
- [ ] Открыть любое объявление
- [ ] Прокрутить вниз
- [ ] Проверить, что показываются похожие объявления
- [ ] Нажать на похожее объявление
- [ ] Проверить, что оно открылось

### 14. Поделиться
- [ ] Открыть объявление
- [ ] Нажать "Поделиться"
- [ ] Проверить, что открывается системное меню шаринга
- [ ] Отменить

### 15. Локация
- [ ] Открыть главную страницу
- [ ] Нажать "Моя локация" (кнопка с геолокацией)
- [ ] Разрешить доступ к геолокации
- [ ] Проверить, что объявления отсортировались по расстоянию

### 16. История поиска
- [ ] Ввести несколько поисковых запросов
- [ ] Нажать на поле поиска
- [ ] Проверить, что показывается история поиска
- [ ] Очистить историю

### 17. Отзывы
- [ ] Открыть профиль любого пользователя
- [ ] Прокрутить до раздела отзывов
- [ ] Оставить отзыв (если возможно)
- [ ] Проверить, что отзыв появился

## Проверка после исправлений

### 18. Проверка защиты от потери данных
- [ ] Применить миграцию `fix_cascade_deletion.sql` в Supabase
- [ ] Создать тестовое объявление
- [ ] Проверить, что оно НЕ удаляется при перелогине

### 19. Проверка чата
- [ ] Написать сообщение
- [ ] Проверить, что оно появляется мгновенно
- [ ] НЕ обновлять страницу
- [ ] Написать второе сообщение
- [ ] Проверить, что оба сообщения видны
- [ ] Обновить страницу
- [ ] Проверить, что оба сообщения сохранились

## Критические баги (если обнаружены)

- [ ] Объявления не загружаются
- [ ] Чат не работает
- [ ] Нельзя создать объявление
- [ ] Изображения не загружаются
- [ ] Поиск не работает

## Результаты

**Дата тестирования:** ___________

**Пройдено:** _____ / _____

**Критические баги:** 
- 

**Некритические баги:**
- 

**Комментарии:**
- 
